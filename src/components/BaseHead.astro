---
import SEO from "@/components/SEO.astro";
import siteConfig from "@/data/site.config";
import smartypants from "smartypants";

export type Props = {
  title?: string;
  description?: string;
  image?: { src: string; alt: string };
  canonicalURL?: URL | null;
  pageType?: "website" | "article";
};

const {
  description = siteConfig.description,
  image = siteConfig.image,
  canonicalURL = new URL(Astro.request.url, Astro.site),
  pageType = "website",
} = Astro.props;

const title = [Astro.props.title, siteConfig.name].filter(Boolean).join(" | ");
const resolvedImage = {
  src: new URL(image.src, Astro.site).toString(),
  alt: image.alt,
};

const twitterHandle = "martylouis";

if (!title) {
  throw new Error("Title is required for SEO");
}

if (!description) {
  throw new Error("Description is required for SEO");
}
---

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<title set:html={smartypants(title, 1)} />
<meta name="generator" content={Astro.generator} />
<meta name="theme-color" content="#0d9488" />

<!-- TODO: Add adaptive icon https://web.dev/articles/building/an-adaptive-favicon <link rel="icon" type="image/svg+xml" href="/favicon.svg" /> -->
<!-- TODO: Add mask icon <link rel="mask-icon" href="/favicon.svg" color="#8D46E7" /> -->
<!-- TODO: Add Sitemap <link rel="sitemap" href="/sitemap-index.xml" /> -->
<!-- TODO: Add RSS <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS" /> -->

<SEO
  name={siteConfig.name}
  title={title}
  description={description}
  image={resolvedImage}
  twitter={{ handle: twitterHandle }}
  og={{ type: pageType }}
  canonicalURL={canonicalURL}
/>
